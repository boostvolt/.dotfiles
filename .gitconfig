# Org-specific config overrides
[includeIf "hasconfig:remote.*.url:git@github.com:*/**"]
	path = ~/.gitconfig-github

[includeIf "hasconfig:remote.*.url:git@github.zhaw.ch:*/**"]
	path = ~/.gitconfig-zhaw

[user]
	email = 51777660+boostvolt@users.noreply.github.com
	signingkey = /Users/jankott/.ssh/id_github.pub

[core]
	excludesFile = ~/.gitignore
	# Case-sensitive filenames
	ignorecase = false
	# Keep macOS Unicode form
	precomposeunicode = false
	# Speed up git status
	untrackedCache = true
	# Use delta for diffs
	pager = delta

[init]
	defaultBranch = main

[commit]
	# Sign all commits
	gpgsign = true

[gpg]
	# Use SSH keys for signing
	format = ssh

[merge]
	# Show original in conflicts
	conflictStyle = zdiff3

[rebase]
	# Auto-apply --squash commits
	autosquash = true

[fetch]
	# Remove stale remote branches
	prune = true

[push]
	# Auto-setup remote tracking
	autoSetupRemote = true
	# Push related tags
	followTags = true

[help]
	# Auto-correct typos
	autocorrect = 1

[interactive]
	diffFilter = delta --color-only

[delta]
	syntax-theme = GitHub
	navigate = true
	side-by-side = true
	hyperlinks = true
	hyperlinks-file-link-format = "vscode://file/{path}:{line}"

[alias]
	modify = "!f() { git commit --amend \"$@\" && git rebase --update-refs HEAD~1; }; f"
	sync = "!f() { remote=$(git remote | head -1); trunk=${1:-main}; git fetch $remote && git rebase $remote/$trunk --update-refs && git branch -vv | grep ': gone]' | awk '{print $1}' | xargs -r git branch -D; }; f"
	submit = "!f() { remote=$(git remote | head -1); git push -u $remote HEAD --force-with-lease && if gh pr view HEAD >/dev/null 2>&1; then echo 'PR exists'; gh pr view --web; else gh pr create --fill; fi; }; f"

[filter "lfs"]
	clean = git-lfs clean -- %f
	smudge = git-lfs smudge -- %f
	process = git-lfs filter-process
	required = true
